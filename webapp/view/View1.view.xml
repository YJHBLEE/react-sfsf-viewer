<mvc:View controllerName="project1.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:uxap="sap.uxap"
    xmlns:layout="sap.ui.layout">
    <uxap:ObjectPageLayout id="ObjectPageLayout" showTitleInHeaderContent="true" upperCaseAnchorBar="false">
        <uxap:headerTitle>
            <uxap:ObjectPageDynamicHeaderTitle id="headerTitle">
                <uxap:expandedHeading>
                    <HBox alignItems="Center">
                        <Title id="expandedTitle" text="{lastName}, {firstName}" wrapping="true" class="sapUiSmallMarginEnd" visible="{= !${view>/busy} }"/>
                        <VBox width="15rem" height="2rem" class="skeleton" visible="{view>/busy}" />
                    </HBox>
                </uxap:expandedHeading>
                <uxap:snappedHeading>
                    <HBox alignItems="Center">
                        <Title id="snappedTitle" text="{lastName}, {firstName}" wrapping="true" visible="{= !${view>/busy} }"/>
                        <VBox width="12rem" height="1.5rem" class="skeleton" visible="{view>/busy}" />
                    </HBox>
                </uxap:snappedHeading>
                <uxap:actions>
                    <Avatar 
                        id="headerAvatar"
                        src="{view>/photoUrl}" 
                        displaySize="XS" 
                        press=".onAvatarPress" 
                        tooltip="{userInfo>/displayName}"
                        displayShape="Circle" />
                </uxap:actions>
            </uxap:ObjectPageDynamicHeaderTitle>
        </uxap:headerTitle>

        <uxap:headerContent>
            <!-- 실제 컨텐츠 -->
            <FlexBox id="headerFlex" wrap="Wrap" alignItems="Start" width="100%" visible="{= !${view>/busy} }">
                <Avatar id="userAvatar" 
                    src="{view>/photoUrl}" 
                    displaySize="L" 
                    class="sapUiSmallMarginEnd sapUiSmallMarginBottom"
                    displayShape="Circle"/>
                <VBox id="headerInfo" class="sapUiSmallMarginEnd sapUiSmallMarginBottom">
                    <Label id="lblJobHeader" text="{i18n>labelJobTitle}" design="Bold" />
                    <Text id="txtJobHeader" text="{title}" />
                    <Label id="lblDeptHeader" text="{i18n>labelDepartment}" design="Bold" class="sapUiTinyMarginTop" />
                    <Text id="txtDeptHeader" text="{department}" />
                    <ObjectStatus id="statusUser" text="Active" state="Success" inverted="true" class="sapUiSmallMarginTop" />
                </VBox>
            </FlexBox>

            <!-- 로딩 스켈레톤 -->
            <HBox visible="{view>/busy}" class="sapUiSmallMarginBottom">
                <VBox width="5rem" height="5rem" class="skeleton circle sapUiSmallMarginEnd" />
                <VBox>
                    <VBox width="12rem" height="1rem" class="skeleton sapUiTinyMarginBottom" />
                    <VBox width="8rem" height="1rem" class="skeleton sapUiTinyMarginBottom" />
                    <VBox width="10rem" height="1rem" class="skeleton sapUiTinyMarginBottom" />
                    <VBox width="6rem" height="1.5rem" class="skeleton sapUiSmallMarginTop" />
                </VBox>
            </HBox>
        </uxap:headerContent>

        <uxap:sections>
            <uxap:ObjectPageSection id="sectionGeneral" title="{i18n>sectionGeneralInfo}">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection id="subSectionGeneral">
                        <VBox visible="{view>/busy}" class="sapUiSmallMargin">
                            <VBox width="100%" height="2rem" class="skeleton sapUiSmallMarginBottom" />
                            <VBox width="100%" height="2rem" class="skeleton sapUiSmallMarginBottom" />
                        </VBox>
                        <f:SimpleForm id="formGeneral" editable="false" layout="ColumnLayout" visible="{= !${view>/busy} }">
                            <f:content>
                                <Label id="lblEmail" text="{i18n>labelEmail}" />
                                <Text id="txtEmail" text="{email}" />
                                <Label id="lblUsername" text="Username" />
                                <Text id="txtUsername" text="{username}" />
                            </f:content>
                        </f:SimpleForm>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

            <uxap:ObjectPageSection id="sectionOrg" title="Organization">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection id="subSectionOrg">
                        <VBox visible="{view>/busy}" class="sapUiSmallMargin">
                            <VBox width="100%" height="2rem" class="skeleton sapUiSmallMarginBottom" />
                            <VBox width="100%" height="2rem" class="skeleton sapUiSmallMarginBottom" />
                        </VBox>
                        <f:SimpleForm id="formOrg" editable="false" layout="ColumnLayout" visible="{= !${view>/busy} }">
                            <f:content>
                                <Label id="lblLocation" text="Location" />
                                <Text id="txtLocation" text="{location}" />
                                <Label id="lblDivision" text="Division" />
                                <Text id="txtDivision" text="{division}" />
                                <Label id="lblManager" text="{i18n>labelManager}" />
                                <Text id="txtManager" text="{view>/jobHistory/0/managerUserNav/displayName}" />
                                <Label id="lblGrade" text="{i18n>labelGrade}" />
                                <Text id="txtGrade" text="{view>/jobHistory/0/payGrade}" />
                            </f:content>
                        </f:SimpleForm>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>

            <uxap:ObjectPageSection id="sectionJobHistory" title="{i18n>sectionJobInfo}">
                <uxap:subSections>
                    <uxap:ObjectPageSubSection id="subSectionJobHistory">
                        <VBox class="sapUiSmallMargin">
                            <!-- 로딩 스켈레톤 -->
                            <VBox visible="{view>/busy}">
                                <VBox width="100%" height="2rem" class="skeleton sapUiSmallMarginBottom" />
                                <VBox width="100%" height="10rem" class="skeleton" />
                            </VBox>

                            <!-- 실제 컨텐츠 -->
                            <VBox visible="{= !${view>/busy} }">
                                <Table id="tableJobHistory" items="{view>/jobHistory}" inset="false">
                                    <headerToolbar>
                                        <OverflowToolbar>
                                            <Title text="Job History" level="H3" />
                                        </OverflowToolbar>
                                    </headerToolbar>
                                    <columns>
                                        <Column hAlign="Begin"><Text text="{i18n>columnStartDate}" /></Column>
                                        <Column><Text text="{i18n>columnEvent}" /></Column>
                                        <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>columnEventReason}" /></Column>
                                        <Column minScreenWidth="Desktop" demandPopin="true"><Text text="{i18n>labelCompany}" /></Column>
                                        <Column minScreenWidth="Desktop" demandPopin="true"><Text text="{i18n>labelDepartment}" /></Column>
                                        <Column minScreenWidth="Desktop" demandPopin="true"><Text text="{i18n>columnJobTitle}" /></Column>
                                        <Column minScreenWidth="Desktop" demandPopin="true"><Text text="{i18n>labelGrade}" /></Column>
                                    </columns>
                                    <items>
                                        <ColumnListItem type="Navigation" press=".onJobHistoryPress">
                                            <cells>
                                                <Text text="{path: 'view>startDate', type: 'sap.ui.model.type.Date', formatOptions: {style: 'medium'}}" />
                                                <Text text="{view>eventText}" />
                                                <Text text="{view>eventReasonText}" />
                                                <Text text="{view>companyText}" />
                                                <Text text="{view>departmentText}" />
                                                <Text text="{view>jobTitle}" />
                                                <Text text="{view>payGrade}" />
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </VBox>
                        </VBox>
                    </uxap:ObjectPageSubSection>
                </uxap:subSections>
            </uxap:ObjectPageSection>
        </uxap:sections>
    </uxap:ObjectPageLayout>
</mvc:View>